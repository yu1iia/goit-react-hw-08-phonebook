(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{27:function(t,e,n){"use strict";var a=n(43),r=function(t){return t.contacts.filter},c=function(t){return t.contacts.items},o=Object(a.a)([c,r],(function(t,e){return t.filter((function(t){return t.name.toLowerCase().includes(e.toLowerCase())}))}));e.a={getLoading:function(t){return t.contacts.loading},getFilter:r,getAlert:function(t){return t.contacts.alertSwitch},getFilteredContacts:o,getContacts:c}},3:function(t,e,n){"use strict";e.a={ADD:"contacts/add",DEL:"contacts/del",FILTER:"contacts/filter",DUPLICATE:"contacts/duplicate",ADD_CONTACT_REQUEST:"contacts/addContactRequest",ADD_CONTACT_SUCCESS:"contacts/addContactSuccess",ADD_CONTACT_ERROR:"contacts/addContactError",DEL_CONTACT_REQUEST:"contact/removeContactRequest",DEL_CONTACT_SUCCESS:"contact/removeContactSuccess",DEL_CONTACT_ERROR:"contact/removeContactError",FETCH_CONTACT_REQUEST:"contacts/fetchContactsRequest",FETCH_CONTACT_SUCCESS:"contacts/fetchContactsSuccess",FETCH_CONTACT_ERROR:"contacts/fetchContactsError"}},31:function(t,e,n){"use strict";var a=n(14),r=n.n(a),c=n(13),o=n(4),u={registerRequest:function(){return{type:o.a.REGISTER_REQUEST}},registerSuccess:function(t){return{type:o.a.REGISTER_SUCCESS,payload:Object(c.a)({},t)}},registerError:function(t){return{type:o.a.REGISTER_ERROR,payload:t}},loginRequest:function(){return{type:o.a.LOGIN_REQUEST}},loginSuccess:function(t){return{type:o.a.LOGIN_SUCCESS,payload:t}},loginError:function(t){return{type:o.a.LOGIN_ERROR,payload:t}},logoutSuccess:function(){return{type:o.a.LOGOUT_SUCCESS}},getCurrentUserRequest:function(t){return{type:o.a.GET_CURRENT_USER_REQUEST,payload:t}},getCurrentUserSuccess:function(t){return{type:o.a.GET_CURRENT_USER_SUCCESS,payload:t}},getCurrentUserError:function(t){return{type:o.a.GET_CURRENT_USER_ERROR,payload:t}}};r.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var i=function(t){r.a.defaults.headers.common.Authorization="Bearer ".concat(t)},s=function(){r.a.defaults.headers.common.Authorization=""};e.a={register:function(t){return function(e){e(u.registerRequest()),r.a.post("/users/signup",t).then((function(t){console.log(t),i(t.data.token),e(u.registerSuccess(t.data))})).catch((function(t){return e(u.registerError(t))}))}},logIn:function(t){return function(e){e(u.loginRequest()),r.a.post("/users/login",t).then((function(t){i(t.data.token),e(u.loginSuccess(t.data))})).catch((function(t){return e(u.loginError(t))}))}},getCurrentUser:function(){return function(t,e){var n=e().auth.token;n&&(i(n),t(u.getCurrentUserRequest()),r.a.get("/users/current").then((function(e){var n=e.data;return t(u.getCurrentUserSuccess(n))})).catch((function(t){return u.getCurrentUserError(t)})))}},logOut:function(){return function(t){r.a.post("/users/logout").then((function(){s(),t(u.logoutSuccess())})).catch((function(e){return t(u.logoutError(e))}))}}}},4:function(t,e,n){"use strict";e.a={REGISTER_REQUEST:"auth/registerRequest",REGISTER_SUCCESS:"auth/registerSuccess",REGISTER_ERROR:"auth/registerError",LOGIN_REQUEST:"auth/loginRequest",LOGIN_SUCCESS:"auth/loginSuccess",LOGIN_ERROR:"auth/loginError",LOGOUT_REQUEST:"auth/logoutRequest",LOGOUT_SUCCESS:"auth/logoutSuccess",LOGOUT_ERROR:"auth/logoutError",GET_CURRENT_USER_REQUEST:"auth/getCurrentUserRequest",GET_CURRENT_USER_SUCCESS:"auth/getCurrentUserSuccess",GET_CURRENT_USER_ERROR:"auth/getCurrentUserError"}},49:function(t,e,n){t.exports=n(79)},78:function(t,e,n){},79:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),u=n(25),i=n(26),s=n(30),l=n(29),E=n(6),C=n(12),S=n(2),R=[{path:"/",label:"Home",exact:!0,component:Object(a.lazy)((function(){return n.e(4).then(n.bind(null,88))})),private:!1,restricted:!1},{path:"/register",label:"Register",exact:!0,component:Object(a.lazy)((function(){return n.e(7).then(n.bind(null,89))})),private:!1,restricted:!0},{path:"/login",label:"Login",exact:!0,component:Object(a.lazy)((function(){return n.e(6).then(n.bind(null,90))})),private:!1,restricted:!0},{path:"/contacts",label:"Contacts",exact:!0,component:Object(a.lazy)((function(){return Promise.all([n.e(5),n.e(3)]).then(n.bind(null,91))})),private:!0,restricted:!1}],d=n(19),T=function(t){return t.auth.token},g=function(t){return t.auth.user.name};var f=Object(E.b)((function(t){return{isAuthenticated:T(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,a=Object(d.a)(t,["component","isAuthenticated"]);return r.a.createElement(S.b,Object.assign({},a,{render:function(t){return n?r.a.createElement(e,t):r.a.createElement(S.a,{to:"/register"})}}))}));var O=Object(E.b)((function(t){return{isAuthenticated:T(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,a=Object(d.a)(t,["component","isAuthenticated"]);return r.a.createElement(S.b,Object.assign({},a,{render:function(t){return n&&a.restricted?r.a.createElement(S.a,{to:"/contacts"}):r.a.createElement(e,t)}}))})),h=n(27),_={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,fontFamily:"arial",color:"#2A363B"},activeLink:{color:"#rgb(88, 102, 179)"}},p=Object(E.b)((function(t){return{isAuthenticated:T(t)}}))((function(t){var e=t.isAuthenticated;return r.a.createElement("nav",null,r.a.createElement(C.b,{to:"/",exact:!0,style:_.link,activeStyle:_.activeLink},"HOME"),e&&r.a.createElement(C.b,{to:"/contacts",exact:!0,style:_.link,activeStyle:_.activeLink},"Contacts"))})),b=n(31),m={container:{display:"flex",alignItems:"center"},name:{fontWeight:700,marginRight:12}},U=Object(E.b)((function(t){return{name:g(t)}}),(function(t){return{onLogout:function(){return t(b.a.logOut())}}}))((function(t){var e=t.name,n=t.onLogout;return r.a.createElement("div",{style:m.container},r.a.createElement("span",{style:m.name},"Welcome, ",e),r.a.createElement("button",{type:"button",onClick:n},"Logout"))})),v={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},y=function(){return r.a.createElement("div",null,r.a.createElement(C.b,{to:"/register",exact:!0,style:v.link,activeStyle:v.activeLink},"SIGN UP"),r.a.createElement(C.b,{to:"/login",exact:!0,style:v.link,activeStyle:v.activeLink},"LOG IN"))},A={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}},L=Object(E.b)((function(t){return{isAuthenticated:T(t)}}))((function(t){var e=t.isAuthenticated;return r.a.createElement("header",{style:A.header},r.a.createElement(p,null),e?r.a.createElement(U,null):r.a.createElement(y,null))})),N={container:{width:"80vw",marginLeft:"auto",marginRight:"auto",padding:"0 24px"}},j=function(t){var e=t.children;return r.a.createElement("div",{style:N.container},r.a.createElement(L,null),e)},D=function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var t=this.props.loading;return r.a.createElement(C.a,null,r.a.createElement(j,null,r.a.createElement(a.Suspense,{fallback:t&&r.a.createElement("h2",null,"Loading ...")},r.a.createElement(S.d,null,R.map((function(t){return t.private?r.a.createElement(f,Object.assign({key:t.label},t)):r.a.createElement(O,Object.assign({key:t.label},t))}))))))}}]),n}(a.Component),k=Object(E.b)((function(t){return{loading:h.a.getLoading(t)}}))(D),G=n(5),I=n(44),w=n(45),Q=n(48),x=n(3),F=Object(G.combineReducers)({items:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case x.a.ADD_CONTACT_SUCCESS:return[].concat(Object(Q.a)(t),[a]);case x.a.FETCH_CONTACT_SUCCESS:return a;case x.a.DEL_CONTACT_SUCCESS:return console.log(t),t.filter((function(t){return t.id!==a}));default:return t}},filter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case x.a.FILTER:return a.filter;default:return t}},alertSwitch:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0,n=e.type;e.payload;switch(n){case x.a.DUPLICATE:return!t;default:return t}},loading:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0,n=e.type;e.payload;switch(n){case x.a.ADD_CONTACT_REQUEST:case x.a.FETCH_CONTACT_REQUEST:case x.a.DEL_CONTACT_REQUEST:return!0;case x.a.ADD_CONTACT_SUCCESS:case x.a.ADD_CONTACT_ERROR:case x.a.FETCH_CONTACT_SUCCESS:case x.a.FETCH_CONTACT_ERROR:case x.a.DEL_CONTACT_SUCCESS:case x.a.DEL_CONTACT_ERROR:return!1;default:return t}},error:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case x.a.ADD_CONTACT_ERROR:case x.a.FETCH_CONTACT_ERROR:case x.a.DEL_CONTACT_ERROR:return a;case x.a.ADD_CONTACT_REQUEST:case x.a.FETCH_CONTACT_REQUEST:case x.a.DEL_CONTACT_REQUEST:return null;default:return t}}}),q=n(13),H=n(4),z={email:"",token:""},B=Object(G.combineReducers)({user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(q.a)({},z),e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case H.a.REGISTER_SUCCESS:case H.a.LOGIN_SUCCESS:return Object(q.a)(Object(q.a)({},t),a.user);case H.a.GET_CURRENT_USER_SUCCESS:return a;case H.a.LOGOUT_SUCCESS:return Object(q.a)({},z);default:return t}},token:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case H.a.REGISTER_SUCCESS:case H.a.LOGIN_SUCCESS:return a.token;case H.a.LOGOUT_SUCCESS:return null;default:return t}}}),W=n(24),P=n(46),J=n.n(P),M=[w.a],K={key:"auth",storage:J.a,whiteList:["token"]},V=Object(G.combineReducers)({contacts:F,auth:Object(W.a)(K,B)}),X=Object(G.createStore)(V,Object(I.composeWithDevTools)(G.applyMiddleware.apply(void 0,M))),Y=Object(W.b)(X),Z=(n(78),n(47));o.a.render(r.a.createElement(E.a,{store:X},r.a.createElement(Z.a,{loading:null,persistor:Y},r.a.createElement(k,null))),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.28bc057d.chunk.js.map